#include "GlobalVar.h"

double PI = 3.14159265358979;
DWORD t1 = 0, t2 = 0, t3 = 0, t4 = 0;

// CbCr拓扑表
int CrCb[64] = { 0, 0, 1, 1, 2, 2, 3, 3,
				 0, 0, 1, 1, 2, 2, 3, 3,
				 8, 8, 9, 9,10,10,11,11,
				 8, 8, 9, 9,10,10,11,11,
				16,16,17,17,18,18,19,19,
				16,16,17,17,18,18,19,19,
				24,24,25,25,26,26,27,27,
				24,24,25,25,26,26,27,27 };

int MapCrCb(int i, int s){
	int h = 0;
	if (s == 0)h = 0;
	else if (s == 1)h = 4;
	else if (s == 2)h = 32;
	else if (s == 3)h = 36;
	return CrCb[i] + h;
}

// 反Z型编码表
int FZig[64] = { 0, 1, 5, 6,14,15,27,28,
				 2, 4, 7,13,16,26,29,42,
				 3, 8,12,17,25,30,41,43,
				 9,11,18,24,31,40,44,53,
				10,19,23,32,39,45,52,54,
				20,22,33,38,46,51,55,60,
				21,34,37,47,50,56,59,61,
				35,36,48,49,57,58,62,63 };

// IDCT
double fastIDCT[8][8] = {
0.35355339059327001, 0.49039264020161527, 0.46193976625564348, 0.41573480615127278, 0.35355339059327406, 0.27778511650980153, 0.19134171618254542, 0.097545161008064818,
0.35355339059327001, 0.41573480615127278, 0.19134171618254542, -0.097545161008063236, -0.35355339059327295, -0.49039264020161494, -0.46193976625564409, -0.27778511650980292,
0.35355339059327001, 0.27778511650980153, -0.19134171618254392, -0.49039264020161494, -0.35355339059327523, 0.097545161008061529, 0.4619397662556422, 0.41573480615127451,
0.35355339059327001, 0.097545161008064818, -0.46193976625564287, -0.27778511650980292, 0.35355339059327179, 0.41573480615127451, -0.19134171618254084, -0.49039264020161621,
0.35355339059327001, -0.097545161008063236, -0.46193976625564409, 0.2777851165097987, 0.3535533905932764, -0.41573480615127012, -0.19134171618255019, 0.49039264020161405,
0.35355339059327001, -0.27778511650980026, -0.19134171618254681, 0.49039264020161583, -0.35355339059327084, -0.097545161008069245, 0.46193976625564576, -0.41573480615126807,
0.35355339059327001, -0.4157348061512719, 0.19134171618254253, 0.097545161008067871, -0.35355339059327734, 0.49039264020161655, -0.46193976625564048, 0.27778511650979337,
0.35355339059327001, -0.49039264020161494, 0.4619397662556422, -0.41573480615127012, 0.35355339059326951, -0.27778511650979487, 0.19134171618253656, -0.097545161008053827 };
